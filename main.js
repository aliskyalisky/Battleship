(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{V:()=>c,t:()=>i});const t=()=>{let e=[],t=[],o=[],r=[];return{shipCoordinates:e,hitCoordinates:t,missCoordinates:o,allShots:r,placeShip:t=>{for(let o of t)e.push(o)},receiveAttack:l=>{e.includes(l)?(t.push(l),r.push(l)):(o.push(l),r.push(l))},isWiped:()=>e.length===t.length}};function o(e){let t=document.querySelector(`.${e}container`);t.innerHTML="",function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`a${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`b${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`c${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`d${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`e${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`f${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`g${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`h${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`i${e}`),t.appendChild(o)}}(),function(){for(let e=1;e<11;e++){let o=document.createElement("div");o.classList.add(`j${e}`),t.appendChild(o)}}()}function r(e){if("player1"!==e){if("player2"===e){for(let e of i.hitCoordinates)document.querySelector(`.player2container .${e}`).classList.add("hit");for(let e of i.missCoordinates)document.querySelector(`.player2container .${e}`).classList.add("miss")}}else{for(let e of c.shipCoordinates)document.querySelector(`.player1container .${e}`).classList.add("ship");for(let e of c.hitCoordinates)document.querySelector(`.player1container .${e}`).classList.add("hit");for(let e of c.missCoordinates)document.querySelector(`.player1container .${e}`).classList.add("miss")}}document.querySelector(".startbtn");const l=document.querySelector(".phmessage");document.querySelector(".verticalplacement"),document.querySelector(".infotext");let n={attack:()=>{let e=function(){let e=String.fromCharCode(97+Math.floor(10*Math.random())),t=Math.floor(10*Math.random()+1);for(;c.allShots.includes(e+t);)e=String.fromCharCode(97+Math.floor(10*Math.random())),t=Math.floor(10*Math.random()+1);return e+t}();c.receiveAttack(e),r("player1"),p()},turn:!1},a={turn:!0},c=t(),i=t(),s=!1,d=!0,u=5;o("player1"),o("player2");let h=document.querySelectorAll(".player1container div"),m=document.querySelectorAll(".player2container div");function p(){n.turn?n.turn=!1:n.turn=!0,a.turn?a.turn=!1:a.turn=!0}!function(){let e=5;for(let t=0;t<4;t++){let t=[],o=String.fromCharCode(97+Math.floor(10*Math.random())),r=Math.floor(10*Math.random()+1);for(;r+e>11||i.shipCoordinates.includes(o+r)||i.shipCoordinates.includes(o+(r+(e-1)));)r=Math.floor(10*Math.random()+1);for(let l=0;l<e;l++)t.push(o+(r+l));e--,i.placeShip(t)}}(),document.querySelector(".startbtn").addEventListener("click",(()=>{document.querySelector(".cop1").classList.add("start"),document.querySelector(".cop2").classList.add("start"),document.querySelector(".verticalplacement").classList.add("start"),document.querySelector(".header img").classList.add("start"),document.querySelector(".piratehead").classList.toggle("hidden"),document.querySelector(".phmessagecontainer").classList.toggle("hidden"),document.querySelector(".startbtn").classList.add("hidden")})),h.forEach((e=>e.addEventListener("click",(e=>{d&&function(e){let t=e.target.classList.value.toString().split("");"0"===t[2]&&(t[1]="10");let o=[];if(s){for(let e=0;e<u;e++)o.push(String.fromCharCode(t[0].charCodeAt(0)+e)+t[1]);if(t[0].charCodeAt(0)+u>107)return void(l.textContent="Can't place your ship there captain!")}else{for(let e=0;e<u;e++)o.push(t[0]+(Number(t[1])+e));if(Number(t[1])+u>11)return void(l.textContent="Can't place your ship there captain!")}for(let e of o)if(c.shipCoordinates.includes(e))return void(l.textContent="Can't place your ship there captain!");c.placeShip(o),r("player1"),l.textContent=u>3?`Good! ${u-2} more.`:3===u?"One more, hope you're ready for battle cap!":"Fight!",u--,1===u&&(document.querySelector(".piratehead").classList.toggle("hidden"),document.querySelector(".phmessagecontainer").classList.toggle("hidden"),document.querySelector(".cop1").classList.toggle("player1choose"),document.querySelector(".cop2").classList.toggle("player2behind"),document.querySelector(".verticalplacement").classList.toggle("hidden"),d=!1)}(e)})))),h.forEach((e=>e.addEventListener("mouseenter",(()=>{if(d){let t=e.classList.value.toString().split("");if("0"===t[2]&&(t[1]="10"),s){if(t[0].charCodeAt(0)+u>107)return void e.classList.toggle("invalid");for(let e=0;e<u;e++)document.querySelector(`.${String.fromCharCode(t[0].charCodeAt(0)+e)+t[1]}`).classList.toggle("miss")}else{if(Number(t[1])+u>11)return void e.classList.toggle("invalid");for(let e=0;e<u;e++)document.querySelector(`.${t[0]+(Number(t[1])+e)}`).classList.toggle("miss")}}})))),h.forEach((e=>e.addEventListener("mouseleave",(()=>{if(d){let t=e.classList.value.toString().split("");if("0"===t[2]&&(t[1]="10"),s){if(t[0].charCodeAt(0)+u>107)return void e.classList.toggle("invalid");for(let e=0;e<u;e++)document.querySelector(`.${String.fromCharCode(t[0].charCodeAt(0)+e)+t[1]}`).classList.toggle("miss")}else{if(Number(t[1])+u>11)return void e.classList.toggle("invalid");for(let e=0;e<u;e++)document.querySelector(`.${t[0]+(Number(t[1])+e)}`).classList.toggle("miss")}}})))),m.forEach((e=>e.addEventListener("click",(e=>{n.turn||(i.receiveAttack(e.target.classList.value.toString()),r("player2"),p(),n.turn&&setTimeout((()=>{n.attack()}),1e3),i.isWiped()&&(function(){let e=(i.hitCoordinates.length/i.allShots.length*100).toFixed(0),t=(100-c.hitCoordinates.length/c.shipCoordinates.length*100).toFixed(0),o=e*t;document.querySelector(".score").textContent=`SCORE: ${o}`,document.querySelector(".accuracy").textContent=`Accuracy: ${e}%`,document.querySelector(".shiphealth").textContent=`Ship health: ${t}%`}(),document.querySelector(".piratehead").classList.toggle("hidden"),document.querySelector(".phmessagecontainer").classList.toggle("hidden"),document.querySelector(".cop1").classList.toggle("player1choose"),document.querySelector(".cop2").classList.toggle("player2behind"),document.querySelector(".statdisplay").classList.toggle("visible"),l.textContent="You win! Well done captain."))})))),document.querySelector(".verticalplacement").addEventListener("click",(()=>{document.querySelector(".verticalplacement").classList.toggle("on"),s=!s}))})();